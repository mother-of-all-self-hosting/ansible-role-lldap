{#
SPDX-FileCopyrightText: 2023 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 - 2025 Meier Lukas
SPDX-FileCopyrightText: 2025 Suguru Hirahara

SPDX-License-Identifier: Apache-2.0
#}

{#
See: https://github.com/lldap/lldap/blob/main/docs/install.md#with-docker
#}

UID={{ lldap_uid }}
GID={{ lldap_gid }}

TZ={{ lldap_environment_variables_tz }}

LLDAP_VERBOSE={{ lldap_environment_variables_lldap_verbose | to_json }}

LLDAP_JWT_SECRET={{ lldap_environment_variables_lldap_jwt_secret }}
LLDAP_KEY_SEED={{ lldap_environment_variables_lldap_key_seed }}

LLDAP_LDAP_BASE_DN=dc={{ lldap_environment_variables_lldap_ldap_base_dn }}

{% if lldap_database_type == 'better-sqlite3' %}
DB_CLIENT=better-sqlite3

{% if lldap_database_filename %}
DB_FILENAME={{ lldap_database_filename }}
{% endif %}

{% endif %}

{% if lldap_database_type == 'mysql2' %}
DB_CLIENT=mysql2
DB_HOST={{ lldap_database_mysql_hostname }}
DB_PORT={{ lldap_database_mysql_port }}
DB_USER={{ lldap_database_mysql_username }}
DB_PASSWORD={{ lldap_database_mysql_password }}
DB_SSL={{ lldap_database_mysql_ssl | to_json }}
DB_NAME={{ lldap_database_name }}
{% endif %}

{% if lldap_database_type == 'pg' %}
DB_CLIENT=pg
DB_HOST={{ lldap_database_postgres_hostname }}
DB_PORT={{ lldap_database_postgres_port }}
DB_USER={{ lldap_database_postgres_username }}
DB_PASSWORD={{ lldap_database_postgres_password }}
DB_SSL={{ lldap_database_postgres_ssl | to_json }}
DB_NAME={{ lldap_database_name }}
{% endif %}


{% if lldap_environment_variables_smtp_enabled %}
MAIL_ENABLED={{ lldap_environment_variables_smtp_enabled | to_json }}
MAIL_HOST={{ lldap_environment_variables_smtp_host }}
MAIL_PORT={{ lldap_environment_variables_smtp_port }}

{% if lldap_environment_variables_smtp_user %}
MAIL_USER={{ lldap_environment_variables_smtp_user }}
{% endif %}

{% if lldap_environment_variables_smtp_password %}
MAIL_PASSWORD={{ lldap_environment_variables_smtp_password }}
{% endif %}

MAIL_FROM={{ lldap_environment_variables_smtp_from }}
MAIL_SECURE={{ lldap_environment_variables_smtp_secure | to_json }}

{% endif %}

{{ lldap_environment_variables_additional_variables }}
